<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
  <title>Fix issues of Projectile for better project management - Icarus&#39;s Wings - A blog of oracleyue</title>
  <meta name="renderer" content="webkit" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>

<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />

<meta name="theme-color" content="#f8f5ec" />
<meta name="msapplication-navbutton-color" content="#f8f5ec">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="#f8f5ec">


<meta name="author" content="oracleyue" /><meta name="description" content="Customize project detection We may like to control whether a folder should be guessed as a project root. Sometimes you may see a folder annoyingly being added to project list, e.g., HOME, Dropbox root. This is mostly likely due to default set of a long list for projectile-project-root-files. For better control, it is good to reset it. You may find the policy in the well-written Projectile Docs.
" /><meta name="keywords" content="oracleyue, blog, Hugo, even" />






<meta name="generator" content="Hugo 0.87.0 with theme even" />


<link rel="canonical" href="https://oracleyue.github.io/post/fix-issues-projectile/" />
<link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
<link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
<link rel="manifest" href="/manifest.json">
<link rel="mask-icon" href="/safari-pinned-tab.svg" color="#5bbad5">



<link href="/sass/main.min.154ed883776547b0e136be39b3037f61350da06f888d0868d1756a9463cd9520.css" rel="stylesheet">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@3.1.20/dist/jquery.fancybox.min.css" integrity="sha256-7TyXnr2YU040zfSP+rEcz29ggW4j56/ujTPwjMzyqFY=" crossorigin="anonymous">


<meta property="og:title" content="Fix issues of Projectile for better project management" />
<meta property="og:description" content="Customize project detection
We may like to control whether a folder should be guessed as a project
root. Sometimes you may see a folder annoyingly being added to project
list, e.g., HOME, Dropbox root. This is mostly likely due to default set
of a long list for projectile-project-root-files. For better control,
it is good to reset it. You may find the policy in the well-written
Projectile
Docs." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://oracleyue.github.io/post/fix-issues-projectile/" /><meta property="article:section" content="post" />
<meta property="article:published_time" content="2021-03-05T00:00:00+00:00" />
<meta property="article:modified_time" content="2021-03-05T00:00:00+00:00" />

<meta itemprop="name" content="Fix issues of Projectile for better project management">
<meta itemprop="description" content="Customize project detection
We may like to control whether a folder should be guessed as a project
root. Sometimes you may see a folder annoyingly being added to project
list, e.g., HOME, Dropbox root. This is mostly likely due to default set
of a long list for projectile-project-root-files. For better control,
it is good to reset it. You may find the policy in the well-written
Projectile
Docs."><meta itemprop="datePublished" content="2021-03-05T00:00:00+00:00" />
<meta itemprop="dateModified" content="2021-03-05T00:00:00+00:00" />
<meta itemprop="wordCount" content="425">
<meta itemprop="keywords" content="emacs,programming,linux," /><meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="Fix issues of Projectile for better project management"/>
<meta name="twitter:description" content="Customize project detection
We may like to control whether a folder should be guessed as a project
root. Sometimes you may see a folder annoyingly being added to project
list, e.g., HOME, Dropbox root. This is mostly likely due to default set
of a long list for projectile-project-root-files. For better control,
it is good to reset it. You may find the policy in the well-written
Projectile
Docs."/>

<!--[if lte IE 9]>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/classlist/1.1.20170427/classList.min.js"></script>
<![endif]-->

<!--[if lt IE 9]>
  <script src="https://cdn.jsdelivr.net/npm/html5shiv@3.7.3/dist/html5shiv.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/respond.js@1.4.2/dest/respond.min.js"></script>
<![endif]-->

</head>
<body>
  <div id="mobile-navbar" class="mobile-navbar">
  <div class="mobile-header-logo">
    <a href="/" class="logo">Icarus&#39;s Wings</a>
  </div>
  <div class="mobile-navbar-icon">
    <span></span>
    <span></span>
    <span></span>
  </div>
</div>
<nav id="mobile-menu" class="mobile-menu slideout-menu">
  <ul class="mobile-menu-list">
    <a href="/">
        <li class="mobile-menu-item">Home</li>
      </a><a href="/post/">
        <li class="mobile-menu-item">Archives</li>
      </a><a href="/tags/">
        <li class="mobile-menu-item">Tags</li>
      </a><a href="/categories/">
        <li class="mobile-menu-item">Categories</li>
      </a><a href="/about/">
        <li class="mobile-menu-item">About</li>
      </a>
  </ul>
</nav>
  <div class="container" id="mobile-panel">
    <header id="header" class="header">
        <div class="logo-wrapper">
  <a href="/" class="logo">Icarus&#39;s Wings</a>
</div>

<nav class="site-navbar">
  <ul id="menu" class="menu">
    <li class="menu-item">
        <a class="menu-item-link" href="/">Home</a>
      </li><li class="menu-item">
        <a class="menu-item-link" href="/post/">Archives</a>
      </li><li class="menu-item">
        <a class="menu-item-link" href="/tags/">Tags</a>
      </li><li class="menu-item">
        <a class="menu-item-link" href="/categories/">Categories</a>
      </li><li class="menu-item">
        <a class="menu-item-link" href="/about/">About</a>
      </li>
  </ul>
</nav>
    </header>

    <main id="main" class="main">
      <div class="content-wrapper">
        <div id="content" class="content">
          <article class="post">
    
    <header class="post-header">
      <h1 class="post-title">Fix issues of Projectile for better project management</h1>

      <div class="post-meta">
        <span class="post-time"> 2021-03-05 </span>
        <div class="post-category">
            <a href="/categories/emacs/"> Emacs </a>
            </div>
        
      </div>
    </header>

    <div class="post-toc" id="post-toc">
  <h2 class="post-toc-title">Contents</h2>
  <div class="post-toc-content always-active">
    <nav id="TableOfContents">
  <ul>
    <li>
      <ul>
        <li><a href="#customize-project-detection">Customize project detection</a></li>
        <li><a href="#exclude-user-specified-projectsfoldersfiles-in-projectile">Exclude user-specified projects/folders/files in Projectile</a>
          <ul>
            <li><a href="#excluding-projects">Excluding projects</a></li>
            <li><a href="#ignoring-foldersfiles-in-projectile-search">Ignoring folders/files in Projectile search</a></li>
          </ul>
        </li>
      </ul>
    </li>
  </ul>
</nav>
  </div>
</div>
    <div class="post-content">
      <h2 id="customize-project-detection">Customize project detection</h2>
<p>We may like to control whether a folder should be guessed as a project
root. Sometimes you may see a folder annoyingly being added to project
list, e.g., HOME, Dropbox root. This is mostly likely due to default set
of a long list for <code>projectile-project-root-files</code>. For better control,
it is good to reset it. You may find the policy in the well-written
<a href="https://docs.projectile.mx/projectile/projects.html#supported-project-types">Projectile
Docs</a>.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-lisp" data-lang="lisp">  <span class="c1">;; control project root additional guess (besides &#34;.git&#34;, &#34;.projectile&#34;)</span>
  <span class="p">(</span><span class="k">setq</span> <span class="nv">projectile-project-root-files</span>
        <span class="o">&#39;</span><span class="p">(</span><span class="s">&#34;CMakeLists.txt&#34;</span> <span class="s">&#34;Makefile&#34;</span> <span class="s">&#34;configure.ac&#34;</span> <span class="s">&#34;configure.in&#34;</span>
          <span class="s">&#34;TAGS&#34;</span> <span class="s">&#34;GTAGS&#34;</span><span class="p">))</span>
</code></pre></td></tr></table>
</div>
</div><h2 id="exclude-user-specified-projectsfoldersfiles-in-projectile">Exclude user-specified projects/folders/files in Projectile</h2>
<h3 id="excluding-projects">Excluding projects</h3>
<p>To ignore folders that should never be listed as projects, simply set
<code>projectile-ignored-projects</code>. For example,</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-lisp" data-lang="lisp">  <span class="p">(</span><span class="k">setq</span> <span class="nv">projectile-ignored-projects</span> <span class="o">&#39;</span><span class="p">(</span><span class="s">&#34;~/&#34;</span>
                                      <span class="s">&#34;~/Public/Dropbox/&#34;</span><span class="p">))</span>
</code></pre></td></tr></table>
</div>
</div><h3 id="ignoring-foldersfiles-in-projectile-search">Ignoring folders/files in Projectile search</h3>
<p>However, in <code>projectile-find-file</code> or <code>projectile-find-dir</code>, it does NOT
obey the rule. For example, it triggers annoying search of your home
folder, which usually takes long time and freezes your Emacs. Moreover,
you may not like certain folders or files to be listed when you use
<code>projectile</code> to locate files or folders.</p>
<p>Since <code>projetile-indexing-method</code> is default set to <code>alien</code>, both
<code>projectile-globally-ignored-directories</code> and
<code>projectile-globally-ignored-files</code> will not be used. However, choosing
<code>native</code> indexing method compromises speed performance considerably,
especially for large projects.</p>
<p>Suppose we prefer <code>alien</code> for best performance, there is a way to get
both satisfied. The idea is to set <code>projectile-generic-command</code> that is
used for <code>alien</code> type indexing. Assume we use <code>ripgrep</code> (terminal
command <code>rg</code>), we can add arguments to <code>rg</code> to ignore folders/files as
you prefer,</p>
<ul>
<li>
<p>ignoring folder by option <code>--glob</code> with folders read from
<code>projectile-globally-ignored-directories</code> that you set;</p>
</li>
<li>
<p>ignoring files by option <code>--ignore-file</code>. However, this option
specifies a file that lists all files to be ignored. The easy way is
to create a global file (e.g., in <code>~/.emacs.d/</code>) and list there all
files that you like to put to <code>projectile-globally-ignored-files</code>. For
example, we set a file name <code>~/.emacs.d/rg_ignore</code>.</p>
</li>
</ul>
<p>The whole setup as an example is given below:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-lisp" data-lang="lisp">  <span class="c1">;; Due to &#34;alien&#34; indexing method, globally ignore folders/files by</span>
  <span class="c1">;; re-defining &#34;rg&#34; args</span>
  <span class="p">(</span><span class="nf">mapc</span> <span class="p">(</span><span class="nb">lambda</span> <span class="p">(</span><span class="nv">item</span><span class="p">)</span>
          <span class="p">(</span><span class="nv">add-to-list</span> <span class="ss">&#39;projectile-globally-ignored-directories</span> <span class="nv">item</span><span class="p">))</span>
        <span class="o">&#39;</span><span class="p">(</span><span class="s">&#34;Backup&#34;</span> <span class="s">&#34;backup&#34;</span> <span class="s">&#34;auto&#34;</span> <span class="s">&#34;archived&#34;</span><span class="p">))</span>
  <span class="c1">;; files to be ignored should be listed in &#34;~/.emacs.d/rg_ignore&#34;</span>

  <span class="c1">;; Use the faster searcher to handle project files: ripgrep &#34;rg&#34;</span>
  <span class="p">(</span><span class="nb">when</span> <span class="p">(</span><span class="nb">and</span> <span class="p">(</span><span class="nf">not</span> <span class="p">(</span><span class="nv">executable-find</span> <span class="s">&#34;fd&#34;</span><span class="p">))</span>
             <span class="p">(</span><span class="nv">executable-find</span> <span class="s">&#34;rg&#34;</span><span class="p">))</span>
    <span class="p">(</span><span class="k">setq</span> <span class="nv">projectile-generic-command</span>
          <span class="p">(</span><span class="k">let</span> <span class="p">((</span><span class="nv">rg-cmd</span> <span class="s">&#34;&#34;</span><span class="p">))</span>
            <span class="p">(</span><span class="nb">dolist</span> <span class="p">(</span><span class="nv">dir</span> <span class="nv">projectile-globally-ignored-directories</span><span class="p">)</span>
              <span class="p">(</span><span class="k">setq</span> <span class="nv">rg-cmd</span> <span class="p">(</span><span class="nf">format</span> <span class="s">&#34;%s --glob &#39;!%s&#39;&#34;</span> <span class="nv">rg-cmd</span> <span class="nv">dir</span><span class="p">)))</span>
            <span class="p">(</span><span class="k">setq</span> <span class="nv">rg-ignorefile</span>
                  <span class="p">(</span><span class="nv">concat</span> <span class="s">&#34;--ignore-file&#34;</span> <span class="s">&#34; &#34;</span>
                          <span class="p">(</span><span class="nv">expand-file-name</span> <span class="s">&#34;rg_ignore&#34;</span> <span class="nv">user-emacs-directory</span><span class="p">)))</span>
            <span class="p">(</span><span class="nv">concat</span> <span class="s">&#34;rg -0 --files --color=never --hidden&#34;</span> <span class="nv">rg-cmd</span> <span class="s">&#34; &#34;</span> <span class="nv">rg-ignorefile</span><span class="p">))))</span>

</code></pre></td></tr></table>
</div>
</div>
    </div>

    <div class="post-copyright">
  <p class="copyright-item">
    <span class="item-title">Author</span>
    <span class="item-content">oracleyue</span>
  </p>
  <p class="copyright-item">
    <span class="item-title">LastMod</span>
    <span class="item-content">
        2021-03-05
        
    </span>
  </p>
  
  
</div>
<footer class="post-footer">
      <div class="post-tags">
          <a href="/tags/emacs/">emacs</a>
          <a href="/tags/programming/">programming</a>
          <a href="/tags/linux/">linux</a>
          </div>
      <nav class="post-nav">
        <a class="prev" href="/post/setup-opengl/">
            <i class="iconfont icon-left"></i>
            <span class="prev-text nav-default">The first step to OpenGL programming on macOS</span>
            <span class="prev-text nav-mobile">Prev</span>
          </a>
        <a class="next" href="/post/djvu2pdf_with_toc/">
            <span class="next-text nav-default">How to convert DJVU to PDF with table of contents</span>
            <span class="next-text nav-mobile">Next</span>
            <i class="iconfont icon-right"></i>
          </a>
      </nav>
    </footer>
  </article>
        </div>
        <div id="disqus_thread"></div>
    <script type="text/javascript">
    (function() {
      
      
      if (window.location.hostname === 'localhost') return;

      var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
      var disqus_shortname = 'oracleyue-github-io';
      dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
      (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
    </script>
    <noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>

  

  

      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="social-links">
      <a href="mailto:oracleyue@gmail.com" class="iconfont icon-email" title="email"></a>
      <a href="https://www.facebook.com/zuogong.yue" class="iconfont icon-facebook" title="facebook"></a>
      <a href="https://www.linkedin.com/in/zuogong-yue-2921a223" class="iconfont icon-linkedin" title="linkedin"></a>
      <a href="https://scholar.google.com/citations?user=b3AVP4QAAAAJ&amp;hl=en" class="iconfont icon-google" title="google"></a>
      <a href="https://github.com/oracleyue" class="iconfont icon-github" title="github"></a>
  <a href="https://oracleyue.github.io/index.xml" type="application/rss+xml" class="iconfont icon-rss" title="rss"></a>
</div>

<div class="copyright">
  <span class="power-by">
    Powered by <a class="hexo-link" href="https://gohugo.io">Hugo</a>
  </span>
  <span class="division">|</span>
  <span class="theme-info">
    Theme - 
    <a class="theme-link" href="https://github.com/olOwOlo/hugo-theme-even">Even</a>
  </span>

  

  <span class="copyright-year">
    &copy; 
    2017 - 
    2021<span class="heart"><i class="iconfont icon-heart"></i></span><span>oracleyue</span>
  </span>
</div>

    </footer>

    <div class="back-to-top" id="back-to-top">
      <i class="iconfont icon-up"></i>
    </div>
  </div>
  
  <script src="https://cdn.jsdelivr.net/npm/jquery@3.2.1/dist/jquery.min.js" integrity="sha256-hwg4gsxgFZhOsEEamdOYGBf13FyQuiTwlAQgxVSNgt4=" crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/slideout@1.0.1/dist/slideout.min.js" integrity="sha256-t+zJ/g8/KXIJMjSVQdnibt4dlaDxc9zXr/9oNPeWqdg=" crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@3.1.20/dist/jquery.fancybox.min.js" integrity="sha256-XVLffZaxoWfGUEbdzuLi7pwaUJv1cecsQJQqGLe7axY=" crossorigin="anonymous"></script>



<script type="text/javascript" src="/js/main.min.c99b103c33d1539acf3025e1913697534542c4a5aa5af0ccc20475ed2863603b.js"></script>








</body>
</html>
